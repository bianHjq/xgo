package xadmin

import (
	"fmt"
	"testing"

	"github.com/spf13/cast"
	"github.com/stretchr/testify/assert"
)

var token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1UaEVOVUpHTkVNMVFURTRNMEZCTWpkQ05UZzVNRFUxUlRVd1FVSkRNRU13UmtGRVFrRXpSZyJ9.eyJzZXNzaW9uX2lkIjoid1pQc2Yzd3dHUXFGUHJJSnRhS3B6dUw3bHRLaHZYajAiLCJodHRwczovL2FwaS5vcGVuYWkuY29tL3Byb2ZpbGUiOnsiZW1haWwiOiJuaWNvbGVAZmJzLWluYy51cyIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlfSwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS9hdXRoIjp7InBvaWQiOiJvcmctME5oaWdNRFJhck1QdGljVHdEcHVkelAwIiwidXNlcl9pZCI6InVzZXItajBRRUJPWjFDdUJyelRJc0Uxczl2WVRiIn0sImlzcyI6Imh0dHBzOi8vYXV0aDAub3BlbmFpLmNvbS8iLCJzdWIiOiJhdXRoMHw2NWYxZTRiYTdiNzQ5YjUxZGU0ZGE5N2IiLCJhdWQiOlsiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MSIsImh0dHBzOi8vb3BlbmFpLm9wZW5haS5hdXRoMGFwcC5jb20vdXNlcmluZm8iXSwiaWF0IjoxNzIxMjY2MjA3LCJleHAiOjE3MjIxMzAyMDcsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwgbW9kZWwucmVhZCBtb2RlbC5yZXF1ZXN0IG9yZ2FuaXphdGlvbi5yZWFkIG9mZmxpbmVfYWNjZXNzIiwiYXpwIjoicGRsTElYMlk3Mk1JbDJyaExoVEU5VlY5Yk45MDVrQmgifQ.SqoY1izlFIh8qWYaa_W3wCKt_H-ZALSZV3mjePPtqNoL8qISU7UoUOpKyuLt50htUrPleBGB7clrsN0wbLg1xe80e44UvFLsnalasi9Rp7CZ9-jH3PCVUzZBpHm2ded32sYvw-rna5Q-Wk0XO5h5liJ03L_MKs5szKDS2f-WU9XCJKMU2_trjNImrrBo6ctseIPPbDhzwkOuGS1pY2Cz-0lJEuPR9mLQhJedDQgZYQqv4BuEQjzBHm1QvPQBXPDe4fEGTKxv2BlyR2RPUvVz_I85ufnb6L4seGrw0dUxyuku_kSVLgG4HRKDUfQILKGgL3NiEPNTv82_5VroR9g5Dw"

func Test_jwtPayload(t *testing.T) {
	payload, err := JwtPayload(token)

	assert.Nil(t, err)
	fmt.Println(fmt.Sprintf("%d", cast.ToInt64(payload["exp"])))
}
